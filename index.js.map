{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49635382-66eda9712402d4470ed35045b\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: PER_PAGE,\n      },\n    });\n\n    return { images: data.hits, total: data.totalHits };\n  } catch (error) {\n    console.error(\"Error fetching images:\", error.message);\n    return { images: [], total: 0 };\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nlet lightbox = null;\nconst endMessageContainer = document.querySelector(\".end-message\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nexport function createGallery(images, isNewGallery) {\n  const markup = images.map(\n    ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => \n      `<a href=\"${largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        <div class=\"info\">\n          <p>ğŸ‘ ${likes}</p>\n          <p>ğŸ‘€ ${views}</p>\n          <p>ğŸ’¬ ${comments}</p>\n          <p>â¬‡ï¸ ${downloads}</p>\n        </div>\n      </a>`\n  ).join(\"\");\n\n  if (isNewGallery) {\n    galleryContainer.innerHTML = markup;\n  } else {\n    galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n  }\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = \"\";\n  if (lightbox) {\n    lightbox.destroy();\n    lightbox = null;\n  }\n}\n\nexport function showLoader() {\n  document.querySelector(\".loader\").classList.add(\"visible\");\n}\n\nexport function hideLoader() {\n  document.querySelector(\".loader\").classList.remove(\"visible\");\n}\n\nexport function showEndMessage() {\n  endMessageContainer.classList.remove(\"hidden\");\n  endMessageContainer.textContent = \"We're sorry, but you've reached the end of search results.\";\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showEndMessage,\n} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst input = form.querySelector(\"input[name='search-text']\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst endMessageContainer = document.querySelector(\".end-message\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.error({ message: \"Please enter a search query!\" });\n    return;\n  }\n\n  resetGallery(query);\n  await loadImages(false); \n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  currentPage++;\n  await loadImages(true); \n});\n\nfunction resetGallery(query) {\n  clearGallery();\n  showLoader();\n  loadMoreBtn.classList.add(\"hidden\");\n  endMessageContainer.classList.add(\"hidden\");\n  currentQuery = query;\n  currentPage = 1;\n  totalHits = 0;\n}\n\nasync function loadImages(scrollOnLoad) {\n  showLoader();\n  try {\n    const { images, total } = await getImagesByQuery(currentQuery, currentPage);\n    hideLoader();\n    totalHits = total;\n\n    if (!images.length) {\n      iziToast.info({\n        message:\n     \"Sorry, there are no images matching your search query. Please try again!\"\n      });\n      loadMoreBtn.classList.add(\"hidden\");\n      return;\n    }\n\n    createGallery(images, currentPage === 1);\n\n    if (totalHits <= currentPage * 15) {\n      loadMoreBtn.classList.add(\"hidden\");\n      showEndMessage();\n    } else {\n      loadMoreBtn.classList.remove(\"hidden\");\n    }\n\n    if (scrollOnLoad) {\n      smoothScrollToNext();\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ message: \"Something went wrong while loading images.\" });\n    console.error(error);\n  } finally {\n    form.reset();\n  }\n}\n\nfunction smoothScrollToNext() {\n  const firstCard = document.querySelector(\".gallery .gallery-item\");\n\n  if (firstCard) {\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 3,\n      behavior: \"smooth\",\n    });\n  }\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","data","axios","error","galleryContainer","lightbox","endMessageContainer","createGallery","images","isNewGallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showEndMessage","form","input","loadMoreBtn","currentPage","currentQuery","totalHits","event","iziToast","resetGallery","loadImages","scrollOnLoad","total","smoothScrollToNext","firstCard","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACtD,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIN,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CACX,CACP,CAAK,EAED,MAAO,CAAE,OAAQI,EAAK,KAAM,MAAOA,EAAK,UACzC,OAAQE,EAAO,CACd,eAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC9C,CAAE,OAAQ,CAAA,EAAI,MAAO,CAAC,CAC9B,CACH,CCtBA,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAC1D,IAAIC,EAAW,KACf,MAAMC,EAAsB,SAAS,cAAc,cAAc,EAC7C,SAAS,cAAc,YAAY,EAEhD,SAASC,EAAcC,EAAQC,EAAc,CAClD,MAAMC,EAASF,EAAO,IACpB,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACvE,YAAYL,CAAa;AAAA,oBACXD,CAAY,UAAUE,CAAI;AAAA;AAAA,kBAE5BC,CAAK;AAAA,kBACLC,CAAK;AAAA,kBACLC,CAAQ;AAAA,kBACRC,CAAS;AAAA;AAAA,WAG3B,EAAI,KAAK,EAAE,EAELR,EACFL,EAAiB,UAAYM,EAE7BN,EAAiB,mBAAmB,YAAaM,CAAM,EAGpDL,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIa,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CAEO,SAASC,GAAe,CAC7Bf,EAAiB,UAAY,GACzBC,IACFA,EAAS,QAAO,EAChBA,EAAW,KAEf,CAEO,SAASe,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,SAAS,CAC3D,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,SAAS,CAC9D,CAEO,SAASC,GAAiB,CAC/BhB,EAAoB,UAAU,OAAO,QAAQ,EAC7CA,EAAoB,YAAc,4DACpC,CC9CA,MAAMiB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,2BAA2B,EACtDE,EAAc,SAAS,cAAc,YAAY,EACjDnB,EAAsB,SAAS,cAAc,cAAc,EAEjE,IAAIoB,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBL,EAAK,iBAAiB,SAAU,MAAOM,GAAU,CAC/CA,EAAM,eAAc,EACpB,MAAM9B,EAAQyB,EAAM,MAAM,KAAI,EAE9B,GAAI,CAACzB,EAAO,CACV+B,EAAS,MAAM,CAAE,QAAS,8BAAgC,CAAA,EAC1D,MACD,CAEDC,EAAahC,CAAK,EAClB,MAAMiC,EAAW,EAAK,CACxB,CAAC,EAEDP,EAAY,iBAAiB,QAAS,SAAY,CAChDC,IACA,MAAMM,EAAW,EAAI,CACvB,CAAC,EAED,SAASD,EAAahC,EAAO,CAC3BoB,IACAC,IACAK,EAAY,UAAU,IAAI,QAAQ,EAClCnB,EAAoB,UAAU,IAAI,QAAQ,EAC1CqB,EAAe5B,EACf2B,EAAc,EACdE,EAAY,CACd,CAEA,eAAeI,EAAWC,EAAc,CACtCb,IACA,GAAI,CACF,KAAM,CAAE,OAAAZ,EAAQ,MAAA0B,CAAO,EAAG,MAAMpC,EAAiB6B,EAAcD,CAAW,EAI1E,GAHAL,IACAO,EAAYM,EAER,CAAC1B,EAAO,OAAQ,CAClBsB,EAAS,KAAK,CACZ,QACH,0EACL,CAAO,EACDL,EAAY,UAAU,IAAI,QAAQ,EAClC,MACD,CAEDlB,EAAcC,EAAQkB,IAAgB,CAAC,EAEnCE,GAAaF,EAAc,IAC7BD,EAAY,UAAU,IAAI,QAAQ,EAClCH,KAEAG,EAAY,UAAU,OAAO,QAAQ,EAGnCQ,GACFE,GAEH,OAAQhC,EAAO,CACdkB,IACAS,EAAS,MAAM,CAAE,QAAS,4CAA8C,CAAA,EACxE,QAAQ,MAAM3B,CAAK,CACvB,QAAY,CACRoB,EAAK,MAAK,CACX,CACH,CAEA,SAASY,GAAqB,CAC5B,MAAMC,EAAY,SAAS,cAAc,wBAAwB,EAEjE,GAAIA,EAAW,CACb,KAAM,CAAE,OAAQC,CAAY,EAAGD,EAAU,sBAAqB,EAE9D,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}